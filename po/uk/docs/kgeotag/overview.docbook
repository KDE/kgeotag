<!-- SPDX-FileCopyrightText: 2022 Tobias Leupold <tl at stonemx dot de>

     SPDX-License-Identifier: CC-BY-SA-4.0
-->

<chapter id="overview">

<title
>Огляд</title>

<section>

<title
>Що це за програма?</title>

<para
>KGeoTag — вільна/безкоштовна програма для роботи із даними геопозиціювання фотографій. Програму написано з використанням C++/<ulink url="https://www.qt.io/"
>Qt</ulink
> та <ulink url="https://api.kde.org/frameworks/"
>KDE Frameworks</ulink
>. Її поширення обмежено умовами <ulink url="https://www.gnu.org/licenses/#GPL"
>Загальної громадської ліцензії GNU (GPL)</ulink
>. </para>

</section>

<section>

<title
>Що таке «геопозиціювання»?</title>

<para
>У файлах фотографій (наприклад зображень JPEG) містяться метадані, зокрема дата створення, відомості щодо фотоапарата тощо. Ці дані зберігаються або у так званому <ulink url="https://en.wikipedia.org/wiki/Exif"
>заголовку Exif</ulink
>, або у <ulink url="https://en.wikipedia.org/wiki/Extensible_Metadata_Platform"
>додатковому файлі XMP</ulink
>, або в обох місцях. Ці дані також можуть містити географічні координати, щоб можна було встановити місце, де було створено зображення. </para>

<para
>У більшості фотоапаратів немає приймачів GPS, тому вони не можуть зберігати координати під час створення знімків. Типовим підходом є, наприклад, паралельне використання пристрою записування журналу GPS (у сучасних умовах цим пристроєм може бути смартфон ;-)), який зберігатиме дані увесь час. Пізніше дати зображень можна порівняти з датами позицій журналу GPS для визначення місць, де було створено знімки. </para>

<para
>Якщо достеменно відомо, де було створено фотографію, можна вказати координати зображення вручну. </para>

</section>

<section>

<title
>Геопозиціювання за допомогою KGeoTag</title>

<section>

<title
>Підтримувані формати файлів</title>

<para
>У поточній версії KGeoTag передбачено підтримку зображень у таких форматах: <ulink url="https://en.wikipedia.org/wiki/JPEG"
>JPEG</ulink
>, <ulink url="https://en.wikipedia.org/wiki/Portable_Network_Graphics"
>PNG</ulink
>, <ulink url="https://en.wikipedia.org/wiki/WebP"
>WebP</ulink
>, <ulink url="https://en.wikipedia.org/wiki/TIFF"
>TIFF</ulink
>, <ulink url="https://en.wikipedia.org/wiki/OpenRaster"
>OpenRaster</ulink
> та <ulink url="https://en.wikipedia.org/wiki/Krita"
>документів Krita</ulink
>, а також деякі з форматів цифрових негативів на основі TIFF: <ulink url="https://en.wikipedia.org/wiki/Raw_image_format"
>Canon Raw v2</ulink
> (.cr2), <ulink url="https://www.nikonusa.com/en/learn-and-explore/a/products-and-innovation/nikon-electronic-format-nef.html"
>Nikon Electronic Format</ulink
> (.nef) та <ulink url="https://helpx.adobe.com/camera-raw/digital-negative.html"
>Adobe Digital Negative</ulink
> (.dng). </para>

<para
>Дані геопозиціювання можна завантажити з файлів <ulink url="https://en.wikipedia.org/wiki/GPS_Exchange_Format"
>GPX</ulink
> (без стискання). </para>

</section>

<section>

<title
>Прив'язування зображень</title>

<para
>У KGeoTag передбачено багато способів пов'язування координат із зображеннями: </para>

<section>

<title
>Автоматичне встановлення міток</title>

<para
>Найзручнішим підходом є автоматичне встановлення відповідності за допомогою геоданих, які зберігаються у файлах GPX. Ці дані може бути завантажено і показано на карті. За допомогою цих даних зображення може бути пов'язано із відповідними географічними координатами шляхом визначення (більш чи менш) точної хронологічної відповідності або шляхом інтерполяції, якщо не буде знайдено точної відповідності. </para>

<para
>Зазвичай, у даних зображення зберігається час і дата, без прив'язки до часового поясу. Тому, для того, щоб зробити прив'язку можливою, слід встановити якийсь часовий пояс. Ймовірний правильний часовий пояс визначається за географічними координатами з файла GPX, але його можна встановити і вручну. </para>

<para
>Якщо у наборі даних не вказано значень висоти або ці значення є недостатньо точними, дані можна знайти на opentopodata.org (див. нижче). </para>

<para
>Годинники на фотоапаратах, зазвичай, не є координованими за радіосигналом, тому часто трохи відхиляються від точного часу. Якщо дати зображень мають певний часовий зсув через неточність годинника на фотоапараті і не синхронізуються із даними GPS (які мають бути правильними), можна визначити відхилення. Далі, це відхилення буде враховано при пошуку відповідності, а також може бути використане для виправлення дат зображень. </para>

</section>

<section>

<title
>Інтерфейс із перетягуванням зі скиданням</title>

<para
>Ще однією з можливостей є встановлення міток зображень перетягуванням зі скиданням. Можна позначити одне або декілька зображень і скинути їх на карту, щоб призначити відповідне місце (можливо, із додатковим наведенням за певним маршрутом GPX). У такий спосіб не можна встановлювати дані щодо висоти, тому для них або буде визначено значення «0 м» (рівень моря), або слід буде ввести значення вручну, або доведеться шукати дані на opentopodata.org (автоматично або вручну, див. нижче). </para>

</section>

<section>

<title
>Прив'язування зображень до закладок</title>

<para
>Для місць, які часто пов'язують із знімками (чиясь осел, де записи GPS не потрібні), можна визначити закладки. Зображення може бути без проблем пов'язано із такими закладками. </para>

</section>

<section>

<title
>Прив'язування вручну</title>

<para
>Також можна вводити координати для одного або декількох зображень вручну. Дані щодо висот може бути автоматично знайдено за допомогою opentopodata.org (див. нижче) або введено вручну. </para>

</section>

</section>

<section>

<title
>Встановлення та пошук даних щодо висот</title>

<para
>Дані щодо висоти можна завжди встановити вручну. Крім того, висоти можна визначити за допомогою запитів до відповідних баз даних висот за допомогою програмного інтерфейсу <ulink url="https://www.opentopodata.org/"
>opentopodata.org</ulink
>. </para>

<para
>Типово, буде використано набір даних <ulink url="https://asterweb.jpl.nasa.gov/gdem.asp"
>ASTER</ulink
>. У цьому наборі зберігаються дані для усієї земної кулі. Також можна скористатися іншими наборами, список яких наведено на <ulink url="https://www.opentopodata.org/#public-api"
>домашній сторінці opentopodata.org</ulink
>. </para>

<para
>Типово, такий пошук на сервері слід започаткувати вручну. Також можна налаштувати автоматичний пошук даних висоти для усіх зображень, які скинуто на карту (яка дає географічні координати, але не дані щодо висоти), або для координат, які введено вручну. </para>

</section>

<section>

<title
>Записування даних до файлів</title>

<para
>Нарешті, призначені координати можна зберегти. KGeoTag може або записати їх до заголовка Exif зображень (що, очевидно, призведе до внесення змін до відповідних файлів), до допоміжних файлів XMP (початкові файли при цьому лишаться незмінними) або до обох джерел даних. Типово, програма створює резервні копії усіх початкових файлів, якщо під час записування до файлів буде внесено зміни. </para>

<para
>У цей спосіб можна зробити прив'язку до геоданих постійною і доступною для інших програм, які її використовують (наприклад <ulink url="https://www.kphotoalbum.org/"
>KPhotoAlbum</ulink
>). </para>

<para
>Якщо виявлено зсув за часом або вказано відхилення, під час зберігання даних можна виправити дату і час для зображень. </para>

</section>

</section>

</chapter>
